(function(){"use strict";var e={1754:function(e,o,r){var t=r(5130),n=r(6768);const a={key:0};function s(e,o,r,t,s,i){const l=(0,n.g2)("router-link"),u=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)("div",null,[i.showNav?((0,n.uX)(),(0,n.CE)("nav",a,[(0,n.bF)(l,{to:"/Dashboard"},{default:(0,n.k6)((()=>o[0]||(o[0]=[(0,n.eW)("Dashboard")]))),_:1})])):(0,n.Q3)("",!0),(0,n.bF)(u)])}var i={computed:{showNav(){const e=["/dashboard/"];return e.includes(this.$route.path)}}},l=r(1241);const u=(0,l.A)(i,[["render",s]]);var c=u,d=r(6306),m=r(1387);function g(e,o,r,t,a,s){const i=(0,n.g2)("LoginForm");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(i)])}var p=r(4232);const f={class:"container-fluid"},h={class:"row"},v={class:"col-sm-6 px-0 d-none d-sm-block"},b=["src"],k={class:"col-sm-6 login-section-wrapper"},w={class:"login-wrapper my-auto"},L={class:"brand-wrapper"},y=["src"],E={class:"form-group"},x={class:"form-group mb-4"},C={key:0,class:"error-message"};function F(e,o,r,a,s,i){const l=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("main",null,[(0,n.Lk)("div",f,[(0,n.Lk)("div",h,[(0,n.Lk)("div",v,[(0,n.Lk)("img",{src:s.registerImage,alt:"login image",class:"login-img"},null,8,b)]),(0,n.Lk)("div",k,[(0,n.Lk)("div",w,[(0,n.Lk)("div",L,[(0,n.Lk)("img",{src:s.logo,alt:"logo",class:"logo"},null,8,y)]),o[7]||(o[7]=(0,n.Lk)("h1",{class:"login-title"},"Inicia Sesión",-1)),(0,n.Lk)("form",{onSubmit:o[2]||(o[2]=(0,t.D$)(((...e)=>i.submitForm&&i.submitForm(...e)),["prevent"]))},[(0,n.Lk)("div",E,[o[3]||(o[3]=(0,n.Lk)("label",{for:"username"},"Usuario",-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>s.form.username=e),type:"text",name:"username",id:"username",class:"input-field",placeholder:"Usuario"},null,512),[[t.Jo,s.form.username]])]),(0,n.Lk)("div",x,[o[4]||(o[4]=(0,n.Lk)("label",{for:"password"},"Contraseña",-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>s.form.password=e),type:"password",name:"password",id:"password",class:"input-field",placeholder:"Contraseña"},null,512),[[t.Jo,s.form.password]])]),s.errorMessage?((0,n.uX)(),(0,n.CE)("span",C,(0,p.v_)(s.errorMessage),1)):(0,n.Q3)("",!0),o[5]||(o[5]=(0,n.Lk)("input",{name:"login",id:"login",class:"btn btn-block login-btn",type:"submit",value:"Register"},null,-1))],32),o[8]||(o[8]=(0,n.Lk)("a",{href:"#!",class:"forgot-password-link"},"¿Olvidó su contraseña?",-1)),(0,n.bF)(l,{to:"/register/",class:"forgot-password-link"},{default:(0,n.k6)((()=>o[6]||(o[6]=[(0,n.eW)("¿No tienes cuenta? Registrate ahora")]))),_:1})])])])])])}r(4114);var A=r.p+"img/logo_goal.28a1b40d.svg",I=r.p+"img/login.b95b93e7.jpg",S={name:"LoginForm",data(){return{logo:A,registerImage:I,form:{username:"",password:""},errorMessage:""}},mounted(){!this.isTokenExpired()&&localStorage.getItem("authToken")&&(console.log("Ya hay un token válido, redirigiendo al dashboard..."),this.$router.push("/dashboard/"))},methods:{async submitForm(){console.log(this.form);try{const e=await d.A.post("https://goalstats-api.onrender.com/api/login/",this.form);if(200===e.status){const o=e.data.token;console.log(o);const r=new Date,t=new Date(r.getTime()+864e6);localStorage.setItem("authToken",o),localStorage.setItem("tokenExpiration",t.toISOString()),this.$router.push("/dashboard/")}console.log(e),console.log(e.data)}catch(e){console.error("Error al registrar:",e),e.response?400===e.response.status?this.errorMessage="Datos inválidos. Por favor, Verifica tus credenciales.":401===e.response.status?this.errorMessage="No autorizado. Verifica tus credenciales.":500===e.response.status?this.errorMessage="Error del servidor. Contacta al administrador del sistema.":this.errorMessage=`Error ${e.response.status}: ${e.response.data.message}`:e.request?this.errorMessage="No se pudo conectar al servidor. Revisa tu conexión de internet.":this.errorMessage="Ocurrió un error inesperado. Intenta nuevamente más tarde."}},isTokenExpired(){const e=localStorage.getItem("tokenExpiration");if(console.log("Fecha de expiración del token:",e),!e)return!0;const o=new Date;return o>new Date(e)}}};const _=(0,l.A)(S,[["render",F],["__scopeId","data-v-1e8bb336"]]);var O=_,D={name:"InicioSesion",components:{LoginForm:O}};const T=(0,l.A)(D,[["render",g]]);var R=T;function j(e,o,r,t,a,s){const i=(0,n.g2)("RegisterForm");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(i)])}const P={class:"container-fluid"},V={class:"row"},X={class:"col-sm-6 px-0 d-none d-sm-block"},M=["src"],U={class:"col-sm-6 login-section-wrapper"},$={class:"login-wrapper"},N={class:"brand-wrapper"},W=["src"],J={class:"form-group"},Q={key:0,class:"limit-warning"},z={class:"form-group"},Y={class:"form-group"},q={key:0,class:"text-danger text-center"},G={class:"form-group mb-4"},H=["value"];function K(e,o,r,a,s,i){const l=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("main",null,[(0,n.Lk)("div",P,[(0,n.Lk)("div",V,[(0,n.Lk)("div",X,[(0,n.Lk)("img",{src:s.registerImage,alt:"login image",class:"login-img"},null,8,M)]),(0,n.Lk)("div",U,[(0,n.Lk)("div",$,[(0,n.Lk)("div",N,[(0,n.Lk)("img",{src:s.logo,alt:"logo",class:"logo"},null,8,W)]),o[12]||(o[12]=(0,n.Lk)("h1",{class:"login-title"},"Regístrate",-1)),(0,n.Lk)("form",{onSubmit:o[5]||(o[5]=(0,t.D$)(((...e)=>i.submitForm&&i.submitForm(...e)),["prevent"]))},[(0,n.Lk)("div",J,[o[6]||(o[6]=(0,n.Lk)("label",{for:"username"},[(0,n.eW)("Nombre de Usuario"),(0,n.Lk)("strong",{class:"text-danger"}," *")],-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>s.form.username=e),type:"text",name:"username",id:"username",class:"input-field",placeholder:"Nombre y Apellido",maxlength:"30"},null,512),[[t.Jo,s.form.username]]),i.isLimitReached?((0,n.uX)(),(0,n.CE)("span",Q,"Has alcanzado el límite de 30 caracteres.")):(0,n.Q3)("",!0)]),(0,n.Lk)("div",z,[o[7]||(o[7]=(0,n.Lk)("label",{for:"email"},[(0,n.eW)("Correo Electrónico "),(0,n.Lk)("strong",{class:"text-danger"}," *")],-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>s.form.email=e),type:"email",name:"email",id:"email",class:"input-field",placeholder:"email@example.com"},null,512),[[t.Jo,s.form.email]])]),(0,n.Lk)("div",Y,[o[8]||(o[8]=(0,n.Lk)("label",{for:"password"},[(0,n.eW)("Contraseña"),(0,n.Lk)("strong",{class:"text-danger"}," *")],-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":o[2]||(o[2]=e=>s.form.password=e),type:"password",name:"password",id:"password",class:"input-field",placeholder:"contraseña",onInput:o[3]||(o[3]=(...e)=>i.validatePassword&&i.validatePassword(...e))},null,544),[[t.Jo,s.form.password]]),s.isPasswordValid?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("span",q,"La contraseña debe contener al menos una mayúscula, una minúscula, un número y un carácter especial."))]),(0,n.Lk)("div",G,[o[9]||(o[9]=(0,n.Lk)("label",{for:"role"},[(0,n.eW)("Escoja su rol"),(0,n.Lk)("strong",{class:"text-danger"}," *")],-1)),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":o[4]||(o[4]=e=>s.form.role=e),name:"role",id:"role",class:"input-field",placeholder:"Rol"},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.roles,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e.value,value:e.value},(0,p.v_)(e.label),9,H)))),128))],512),[[t.u1,s.form.role]])]),o[10]||(o[10]=(0,n.Lk)("input",{name:"login",id:"login",class:"btn btn-block login-btn",type:"submit",value:"Registrarse"},null,-1))],32),(0,n.bF)(l,{to:"/login/",class:"forgot-password-link"},{default:(0,n.k6)((()=>o[11]||(o[11]=[(0,n.eW)("¿Ya tiene cuenta? Inicie sesión")]))),_:1})])])])])])}var B={name:"RegisterForm",data(){return{logo:A,registerImage:I,roles:[{value:"COACH",label:"Entrenador"},{value:"PLAYER",label:"Jugador"}],form:{username:"",email:"",password:"",role:""},isPasswordValid:!0}},mounted(){},computed:{isLimitReached(){return this.form.username.length>=30}},methods:{validatePassword(){const e=this.form.password,o=/[A-Z]/.test(e),r=/[a-z]/.test(e),t=/\d/.test(e),n=/[!@#$%^&*(),.?":{}|<>]/.test(e),a=e.length>=8;this.isPasswordValid=o&&r&&t&&n&&a},async submitForm(){console.log(this.form);try{const e=await d.A.post("https://goalstats-api.onrender.com/api/register/",this.form);console.log(e),console.log(e.data),201===e.status&&(alert("Registro exitoso"),this.$router.push("/login/"))}catch(e){console.error("Error al registrar:",e),alert("Error en el registro, intenta nuevamente.")}}}};const Z=(0,l.A)(B,[["render",K],["__scopeId","data-v-94c62a86"]]);var ee=Z,oe={name:"Register",components:{RegisterForm:ee}};const re=(0,l.A)(oe,[["render",j],["__scopeId","data-v-08774ee7"]]);var te=re;function ne(e,o,r,t,a,s){const i=(0,n.g2)("DashboardViewAdmin");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(i)])}function ae(e,o,r,t,a,s){return(0,n.uX)(),(0,n.CE)(n.FK,null,[o[1]||(o[1]=(0,n.Lk)("h1",null,"UsersAdmin",-1)),(0,n.Lk)("a",{id:"logout",onClick:o[0]||(o[0]=(...e)=>s.logout&&s.logout(...e))},"Cerrar sesión")],64)}var se={name:"DashboardViewAdmin",data(){return{dashboardData:null}},mounted(){this.isTokenExpired()&&(localStorage.removeItem("authToken"),localStorage.removeItem("tokenExpiration"),console.log("El token ha expirado y ha sido eliminado."),this.$router.push("/login/"));const e=localStorage.getItem("authToken");console.log("Sesion iniciada con token:",e)},methods:{isTokenExpired(){const e=localStorage.getItem("tokenExpiration");if(console.log("Fecha de expiración del token:",e),!e)return!0;const o=new Date;return o>new Date(e)},logout(){localStorage.removeItem("authToken"),localStorage.removeItem("tokenExpiration"),console.log("El usuario ha cerrado sesión y el token ha sido destruido."),this.$router.push("/login/")}}};const ie=(0,l.A)(se,[["render",ae]]);var le=ie,ue={name:"Dashboard",components:{DashboardViewAdmin:le}};const ce=(0,l.A)(ue,[["render",ne]]);var de=ce;const me=[{path:"/",redirect:"/register/"},{path:"/login/",name:"Login",component:R},{path:"/register/",name:"Register",component:te},{path:"/dashboard/",name:"Dashboard",component:de},{path:"/about/",name:"about",component:()=>r.e(594).then(r.bind(r,603))}],ge=(0,m.aE)({history:(0,m.LA)("/Goal_Stats/"),routes:me});var pe=ge;r(323);d.A.defaults.withCredentials=!1,d.A.defaults.baseURL="https://goalstats-api.onrender.com/api",(0,t.Ef)(c).use(pe).mount("#app")}},o={};function r(t){var n=o[t];if(void 0!==n)return n.exports;var a=o[t]={exports:{}};return e[t].call(a.exports,a,a.exports,r),a.exports}r.m=e,function(){var e=[];r.O=function(o,t,n,a){if(!t){var s=1/0;for(c=0;c<e.length;c++){t=e[c][0],n=e[c][1],a=e[c][2];for(var i=!0,l=0;l<t.length;l++)(!1&a||s>=a)&&Object.keys(r.O).every((function(e){return r.O[e](t[l])}))?t.splice(l--,1):(i=!1,a<s&&(s=a));if(i){e.splice(c--,1);var u=n();void 0!==u&&(o=u)}}return o}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[t,n,a]}}(),function(){r.n=function(e){var o=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(o,{a:o}),o}}(),function(){r.d=function(e,o){for(var t in o)r.o(o,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:o[t]})}}(),function(){r.f={},r.e=function(e){return Promise.all(Object.keys(r.f).reduce((function(o,t){return r.f[t](e,o),o}),[]))}}(),function(){r.u=function(e){return"js/about.8d75ae24.js"}}(),function(){r.miniCssF=function(e){}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)}}(),function(){var e={},o="goal-stats:";r.l=function(t,n,a,s){if(e[t])e[t].push(n);else{var i,l;if(void 0!==a)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var d=u[c];if(d.getAttribute("src")==t||d.getAttribute("data-webpack")==o+a){i=d;break}}i||(l=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,r.nc&&i.setAttribute("nonce",r.nc),i.setAttribute("data-webpack",o+a),i.src=t),e[t]=[n];var m=function(o,r){i.onerror=i.onload=null,clearTimeout(g);var n=e[t];if(delete e[t],i.parentNode&&i.parentNode.removeChild(i),n&&n.forEach((function(e){return e(r)})),o)return o(r)},g=setTimeout(m.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=m.bind(null,i.onerror),i.onload=m.bind(null,i.onload),l&&document.head.appendChild(i)}}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){r.p="/Goal_Stats/"}(),function(){var e={524:0};r.f.j=function(o,t){var n=r.o(e,o)?e[o]:void 0;if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(r,t){n=e[o]=[r,t]}));t.push(n[2]=a);var s=r.p+r.u(o),i=new Error,l=function(t){if(r.o(e,o)&&(n=e[o],0!==n&&(e[o]=void 0),n)){var a=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;i.message="Loading chunk "+o+" failed.\n("+a+": "+s+")",i.name="ChunkLoadError",i.type=a,i.request=s,n[1](i)}};r.l(s,l,"chunk-"+o,o)}},r.O.j=function(o){return 0===e[o]};var o=function(o,t){var n,a,s=t[0],i=t[1],l=t[2],u=0;if(s.some((function(o){return 0!==e[o]}))){for(n in i)r.o(i,n)&&(r.m[n]=i[n]);if(l)var c=l(r)}for(o&&o(t);u<s.length;u++)a=s[u],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(c)},t=self["webpackChunkgoal_stats"]=self["webpackChunkgoal_stats"]||[];t.forEach(o.bind(null,0)),t.push=o.bind(null,t.push.bind(t))}();var t=r.O(void 0,[504],(function(){return r(1754)}));t=r.O(t)})();
//# sourceMappingURL=app.eda1305c.js.map