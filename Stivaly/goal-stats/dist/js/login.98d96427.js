"use strict";(self["webpackChunkgoal_stats"]=self["webpackChunkgoal_stats"]||[]).push([[966],{8977:function(e,s,o){o.r(s),o.d(s,{default:function(){return y}});var r=o(6768);function a(e,s,o,a,t,n){const i=(0,r.g2)("LoginForm");return(0,r.uX)(),(0,r.CE)("div",null,[(0,r.bF)(i)])}var t=o(5130),n=o(4232);const i={class:"container-fluid"},l={class:"row"},c={class:"col-sm-6 px-0 d-none d-sm-block"},u=["src"],d={class:"col-sm-6 login-section-wrapper"},g={class:"login-wrapper my-auto"},m={class:"brand-wrapper"},p=["src"],k={class:"form-group"},f={class:"form-group mb-4"},h={key:0,class:"error-message"};function b(e,s,o,a,b,v){const L=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("main",null,[(0,r.Lk)("div",i,[(0,r.Lk)("div",l,[(0,r.Lk)("div",c,[(0,r.Lk)("img",{src:b.registerImage,alt:"login image",class:"login-img"},null,8,u)]),(0,r.Lk)("div",d,[(0,r.Lk)("div",g,[(0,r.Lk)("div",m,[(0,r.Lk)("img",{src:b.logo,alt:"logo",class:"logo"},null,8,p)]),s[7]||(s[7]=(0,r.Lk)("h1",{class:"login-title"},"Inicia Sesión",-1)),(0,r.Lk)("form",{onSubmit:s[2]||(s[2]=(0,t.D$)(((...e)=>v.submitForm&&v.submitForm(...e)),["prevent"]))},[(0,r.Lk)("div",k,[s[3]||(s[3]=(0,r.Lk)("label",{for:"username"},"Usuario",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>b.form.username=e),type:"text",name:"username",id:"username",class:"input-field",placeholder:"Usuario"},null,512),[[t.Jo,b.form.username]])]),(0,r.Lk)("div",f,[s[4]||(s[4]=(0,r.Lk)("label",{for:"password"},"Contraseña",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>b.form.password=e),type:"password",name:"password",id:"password",class:"input-field",placeholder:"Contraseña"},null,512),[[t.Jo,b.form.password]])]),b.errorMessage?((0,r.uX)(),(0,r.CE)("span",h,(0,n.v_)(b.errorMessage),1)):(0,r.Q3)("",!0),s[5]||(s[5]=(0,r.Lk)("input",{name:"login",id:"login",class:"btn btn-block login-btn",type:"submit",value:"Register"},null,-1))],32),s[8]||(s[8]=(0,r.Lk)("a",{href:"#!",class:"forgot-password-link"},"¿Olvidó su contraseña?",-1)),(0,r.bF)(L,{to:"/register/",class:"forgot-password-link"},{default:(0,r.k6)((()=>s[6]||(s[6]=[(0,r.eW)("¿No tienes cuenta? Registrate ahora")]))),_:1})])])])])])}o(4114);var v=o(6306),L=o(3084),w=o(7e3),I={name:"LoginForm",data(){return{logo:L,registerImage:w,form:{username:"",password:""},errorMessage:""}},mounted(){!this.isTokenExpired()&&localStorage.getItem("authToken")&&(console.log("Ya hay un token válido, redirigiendo al dashboard..."),this.$router.push("/dashboard/"))},methods:{async submitForm(){console.log(this.form);try{const e=await v.A.post("https://goalstats-api.onrender.com/api/login/",this.form);if(200===e.status){const s=e.data.token;console.log(s);const o=new Date,r=new Date(o.getTime()+864e6);localStorage.setItem("authToken",s),localStorage.setItem("tokenExpiration",r.toISOString()),this.$router.push("/dashboard/")}console.log(e),console.log(e.data)}catch(e){console.error("Error al registrar:",e),e.response?400===e.response.status?this.errorMessage="Datos inválidos. Por favor, Verifica tus credenciales.":401===e.response.status?this.errorMessage="No autorizado. Verifica tus credenciales.":500===e.response.status?this.errorMessage="Error del servidor. Contacta al administrador del sistema.":this.errorMessage=`Error ${e.response.status}: ${e.response.data.message}`:e.request?this.errorMessage="No se pudo conectar al servidor. Revisa tu conexión de internet.":this.errorMessage="Ocurrió un error inesperado. Intenta nuevamente más tarde."}},isTokenExpired(){const e=localStorage.getItem("tokenExpiration");if(console.log("Fecha de expiración del token:",e),!e)return!0;const s=new Date;return s>new Date(e)}}},x=o(1241);const E=(0,x.A)(I,[["render",b],["__scopeId","data-v-1e8bb336"]]);var F=E,M={name:"InicioSesion",components:{LoginForm:F}};const S=(0,x.A)(M,[["render",a]]);var y=S},3084:function(e,s,o){e.exports=o.p+"img/logo_goal.28a1b40d.svg"},7e3:function(e,s,o){e.exports=o.p+"img/login.b95b93e7.jpg"}}]);
//# sourceMappingURL=login.98d96427.js.map