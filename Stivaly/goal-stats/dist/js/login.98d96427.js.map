{"version":3,"file":"js/login.98d96427.js","mappings":"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","sources":["webpack://goal-stats/./src/views/UserLogin.vue","webpack://goal-stats/./src/components/LoginForm.vue","webpack://goal-stats/./src/components/LoginForm.vue?dcb9","webpack://goal-stats/./src/views/UserLogin.vue?f291"],"sourcesContent":["<template>\r\n    <div>\r\n      <LoginForm /> <!-- Componente que contiene el formulario de login -->\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  // Importa el componente que contiene el formulario de Login\r\n  import LoginForm from '@/components/LoginForm.vue'\r\n  \r\n  export default {\r\n    name: 'InicioSesion',\r\n    components: {\r\n        LoginForm\r\n    }\r\n  }\r\n  </script>\r\n  \r\n  <style scoped>\r\n\r\n  </style>","<template>\r\n  <main>\r\n  <div class=\"container-fluid\">\r\n    <div class=\"row\">\r\n      <div class=\"col-sm-6 px-0 d-none d-sm-block\">\r\n        <img :src=\"registerImage\" alt=\"login image\" class=\"login-img\">\r\n      </div>\r\n      <div class=\"col-sm-6 login-section-wrapper\">\r\n        <div class=\"login-wrapper my-auto\">\r\n          <div class=\"brand-wrapper\">\r\n            <img :src=\"logo\" alt=\"logo\" class=\"logo\">\r\n          </div>\r\n          <h1 class=\"login-title\">Inicia Sesión</h1>\r\n          <form @submit.prevent=\"submitForm\">\r\n            <div class=\"form-group\">\r\n              <label for=\"username\">Usuario</label>\r\n              <input v-model=\"form.username\" type=\"text\" name=\"username\" id=\"username\" class=\"input-field\" placeholder=\"Usuario\">\r\n            </div>\r\n            <div class=\"form-group mb-4\">\r\n              <label for=\"password\">Contraseña</label>\r\n              <input v-model=\"form.password\" type=\"password\" name=\"password\" id=\"password\" class=\"input-field\" placeholder=\"Contraseña\">\r\n            </div>\r\n            <span v-if=\"errorMessage\" class=\"error-message\">{{ errorMessage }}</span>\r\n            <input name=\"login\" id=\"login\" class=\"btn btn-block login-btn\" type=\"submit\" value=\"Register\">\r\n          </form>\r\n          <a href=\"#!\" class=\"forgot-password-link\">¿Olvidó su contraseña?</a>\r\n          <router-link to=\"/register/\" class=\"forgot-password-link\">¿No tienes cuenta? Registrate ahora</router-link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</main>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport logo from '@/assets/images/logo_goal.svg'\r\nimport registerImage from '@/assets/images/login.jpg'\r\n\r\n\r\nexport default {\r\n  name: 'LoginForm',\r\n  data() {\r\n    return {\r\n        logo,\r\n        registerImage,\r\n        form: {\r\n          username: '',\r\n          password: '',\r\n        },\r\n        errorMessage: '',\r\n      }\r\n    },\r\n    mounted() {\r\n      if (!this.isTokenExpired() && localStorage.getItem('authToken')) {\r\n        console.log('Ya hay un token válido, redirigiendo al dashboard...');\r\n        this.$router.push('/dashboard/');\r\n      }\r\n      \r\n    },\r\n    methods: {\r\n      async submitForm() {\r\n        console.log(this.form);\r\n        try {\r\n          const response = await axios.post('https://goalstats-api.onrender.com/api/login/', this.form)\r\n          if (response.status === 200) {\r\n            // Suponiendo que el token viene en la respuesta\r\n            const token = response.data.token; \r\n            console.log(token)// Ajusta según cómo se devuelve el token en la respuesta\r\n            const now = new Date();\r\n            const expirationDate = new Date(now.getTime() + 10 * 24 * 60 * 60 * 1000); // 10 días en milisegundos\r\n            \r\n            // Guardar el token y la fecha de expiración en localStorage\r\n            localStorage.setItem('authToken', token);\r\n            localStorage.setItem('tokenExpiration', expirationDate.toISOString()); // Almacena la fecha como cadena\r\n            this.$router.push('/dashboard/'); // Redirige a la página de dashboard o a donde sea necesario\r\n          };\r\n          console.log(response) \r\n          console.log(response.data);\r\n\r\n        } catch (error) {\r\n          console.error('Error al registrar:', error);\r\n          if (error.response) {\r\n            // Errores HTTP (como 400 o 500)\r\n            if (error.response.status === 400) {\r\n              this.errorMessage = 'Datos inválidos. Por favor, Verifica tus credenciales.';\r\n            } else if (error.response.status === 401) {\r\n              this.errorMessage = 'No autorizado. Verifica tus credenciales.';\r\n            } else if (error.response.status === 500) {\r\n              this.errorMessage = 'Error del servidor. Contacta al administrador del sistema.';\r\n            } else {\r\n              this.errorMessage = `Error ${error.response.status}: ${error.response.data.message}`;\r\n            }\r\n          } else if (error.request) {\r\n            // No se recibió respuesta\r\n            this.errorMessage = 'No se pudo conectar al servidor. Revisa tu conexión de internet.';\r\n          } else {\r\n            // Otros errores desconocidos\r\n            this.errorMessage = 'Ocurrió un error inesperado. Intenta nuevamente más tarde.';\r\n          };\r\n        };\r\n      },\r\n      isTokenExpired() {\r\n        const expiration = localStorage.getItem('tokenExpiration');\r\n        console.log('Fecha de expiración del token:', expiration);\r\n        if (!expiration) return true;\r\n\r\n        const now = new Date();\r\n        return now > new Date(expiration); // Retorna true si ya expiró\r\n      },\r\n    }\r\n  }\r\n\r\n</script>\r\n\r\n<style scoped>\r\n  .input-field {\r\n          width: 100%;\r\n          padding: 10px 15px;\r\n          margin-bottom: 15px;\r\n          border: 1px solid #e0e0e0; /* Borde gris claro */\r\n          border-radius: 50px; /* Bordes curvos */\r\n          outline: none;\r\n          font-size: 16px;\r\n      }\r\n\r\n      .input-field:focus {\r\n          border-color: #b3b3b3; /* Cambia el borde en foco */\r\n      }\r\n\r\n      .recover-password {\r\n          display: block;\r\n          text-align: center;\r\n          color: #00aaff;\r\n          text-decoration: none;\r\n          font-size: 14px;\r\n          margin-top: 10px;\r\n      }\r\n\r\n      .recover-password:hover {\r\n          text-decoration: underline;\r\n      }\r\n</style>","import { render } from \"./LoginForm.vue?vue&type=template&id=1e8bb336&scoped=true\"\nimport script from \"./LoginForm.vue?vue&type=script&lang=js\"\nexport * from \"./LoginForm.vue?vue&type=script&lang=js\"\n\nimport \"./LoginForm.vue?vue&type=style&index=0&id=1e8bb336&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1e8bb336\"]])\n\nexport default __exports__","import { render } from \"./UserLogin.vue?vue&type=template&id=68b440d4\"\nimport script from \"./UserLogin.vue?vue&type=script&lang=js\"\nexport * from \"./UserLogin.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementBlock","_createVNode","_component_LoginForm","class","key","_createElementVNode","_hoisted_1","_hoisted_2","_hoisted_3","src","$data","registerImage","alt","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","logo","_hoisted_8","onSubmit","_cache","_withModifiers","args","$options","submitForm","_hoisted_9","for","$event","form","username","type","name","id","placeholder","_hoisted_10","password","errorMessage","_hoisted_11","_toDisplayString","_createCommentVNode","value","href","_component_router_link","to","default","_withCtx","_createTextVNode","_","data","mounted","this","isTokenExpired","localStorage","getItem","console","log","$router","push","methods","response","axios","post","status","token","now","Date","expirationDate","getTime","setItem","toISOString","error","message","request","expiration","__exports__","components","LoginForm","render"],"sourceRoot":""}